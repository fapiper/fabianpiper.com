components:
  terraform:
    load-balancer/defaults:
      metadata:
        type: abstract
        component: load-balancer

      vars:
        enabled: true

        # Load Balancer Configuration
        nlb_display_name: "k3s-nlb"
        is_private: false
        is_preserve_source_destination: false

        # Backend Set Configuration
        backend_set_name: "k3s-backends"
        backend_policy: "FIVE_TUPLE"  # Better for long-lived connections

        # Health Check Configuration
        health_check_protocol: "TCP"
        health_check_port: 6443
        health_check_interval_ms: 10000
        health_check_timeout_ms: 3000
        health_check_retries: 3

        # Listener Configuration for HTTPS (443)
        https_listener_name: "k3s-https-listener"
        https_listener_port: 443
        https_listener_protocol: "TCP"

        # Listener Configuration for HTTP (80)
        http_listener_name: "k3s-http-listener"
        http_listener_port: 80
        http_listener_protocol: "TCP"
